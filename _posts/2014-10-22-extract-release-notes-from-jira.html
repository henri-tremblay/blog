---
layout: post
title: Extract release notes from Jira
date: '2014-10-22T20:03:00.001-07:00'
author: Henri Tremblay
tags:
- What I learned today
modified_time: '2014-10-23T19:33:17.687-07:00'
blogger_id: tag:blogger.com,1999:blog-8282654404214414992.post-5466444821793793972
blogger_orig_url: http://blog.tremblay.pro/2014/10/extract-release-notes-form-jira.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">If you are like me, you love automation. But sometimes, software and automation just don't like each other.<br /><br />Today, I wanted to do a really simple thing. I wanted to retrieve the release notes for an EasyMock version on Jira. Seems easy enough. Jira has a great REST API that should allow to do that in two seconds.<br /><br />Wrong!<br /><br />Let's say you want the release notes for version 3.2. There is no REST API for the release notes. There is one for the versions. However, to get the details of a version, you need the version id. Which isn't 3.2 but an internal id. And there is no search available on the versions.<br /><br />I've decided to keep things "simple" by not using any high level language. Only bash. I'm pretty sure <a href="http://www.gradle.org/" target="_blank">Gradle</a> could have helped me but I didn't want to put my arm in there yet.<br /><br />So, first step, get the id by grepping it from the list of all versions.<br /><br /><pre class="prettyprint bash">version=3.2<br /># Seems complicated but I'm just adding a backslash before the . in 3.2<br />escaped_version=$(echo $version | sed "s/\([0-9]*\)\.\([0-9]*\)/\1\\\.\2/")<br /><br /># Retrieve all versions and the id. Hoping a bit that the fields will stay in the same order<br />jira_version_id=$(curl --silent "http://jira.codehaus.org/rest/api/2/project/EASYMOCK/versions" | grep -o "\"id\":\"[0-9]*\",\"description\":\"EasyMock $escaped_version\"" | cut -d'"' -f4)<br /></pre>Good. Now I have the version id. But sadly, the API doesn't give the release notes for this version. But the Jira GUI does. When doing it by hand, you click on the version, the on the release notes, the you select the format wanted (text or html) and finally, you reach a page with a text area showing exactly what I want.<br /><br />But, of course, there's no way to get only the content of the text area. So I now need to extract it from the page<br /><br /><pre class="prettyprint bash"># Get the page<br />release_notes_page="http://jira.codehaus.org/secure/ReleaseNote.jspa?version=${jira_version_id}&amp;styleName=Text&amp;projectId=12103"<br />release_notes=$(curl --silent "$release_notes_page")<br /><br /># Extract the interesting page<br />echo "$release_notes" | sed -n "/&lt;textarea rows=\"40\" cols=\"120\"&gt;/,/&lt;\/textarea&gt;/p" | grep -v "textarea</pre><br />Et voil√†!<br /><br />BTW, there is a Jira opened in Atlassian bug tracker asking for this exact feature. Please <a href="https://jira.atlassian.com/browse/JRA-3855" target="_blank">vote</a>.  </div>
