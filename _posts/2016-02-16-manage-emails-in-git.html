---
layout: post
title: Manage emails in git
date: '2016-02-16T01:00:00.000-08:00'
author: Henri Tremblay
tags:
- What I learned today
modified_time: '2016-02-16T23:12:53.093-08:00'
blogger_id: tag:blogger.com,1999:blog-8282654404214414992.post-8471363796484285172
blogger_orig_url: http://blog.tremblay.pro/2016/02/manage-emails-in-git.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">If you are like me, you tend to work on open source using your personal email and at YP using your enterprise email. But git doesn't handle that well so you need to never forget to do <span style="font-family: Courier New, Courier, monospace;">git config user.email henri.tremblay@somewhere.com</span>&nbsp;after each <span style="font-family: Courier New, Courier, monospace;">git init</span> or <span style="font-family: Courier New, Courier, monospace;">git clone</span>.<br /><br />I finally had the time for work on an almost satisfying solution.<br /><br />First, there is a concept of git template. It means that your <span style="font-family: Courier New, Courier, monospace;">.git</span> directory will be initialized with files coming from a template. By default, it uses the default template <span style="font-family: Courier New, Courier, monospace;">$GIT_INSTALL_DIR/share/git-core/templates</span>.<br /><br />However, you can define your own. That's <a href="https://github.com/henri-tremblay/git_template" target="_blank">what I did</a>.<br /><br />If you clone (and fork) this repository, you can then set it as the default template<br /><br /><span style="font-family: Courier New, Courier, monospace;">git config --global init.templatedir "$PWD/template"</span><br /><br />Why do I need that? Because I want a standard pre-commit hook that will make sure my personal email is not used when committing in my enterprise git and that my work email is never used on GitHub.<br /><br />Look at the <a href="https://github.com/henri-tremblay/git_template/blob/master/template/hooks/pre-commit" target="_blank">code of the hook</a>. I'm pretty sure that is a lot of room for improvement. But it's a good start. Of course, you will need to modify the <span style="font-family: Courier New, Courier, monospace;">enterprise_email</span> variable to fit yours. If you find a way to improve, please do a pull request.<br /><br />Some details about what it does<br /><br /><ol style="text-align: left;"><li>It checks that a remote origin is configured and fails if not. I might found that annoying soon. We'll see. I need a remote origin because I need to know if it will commit to my enterprise git or somewhere else</li><li>It checks is the remote origin is my enterprise and then if the email set is my enterprise email</li><li>If not, it sets it and fail. I would have love to commit right away but it seems git keeps committing with the old value.</li><li>If I am committing on a repo outside my enterprise, it makes sure I'm not using the enterprise email and fails if I do</li></ol><br /><div><br /></div></div>